<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Story</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
</head>
<body>
    <div class="game-container">
        <!-- Loading Screen -->
        <div id="loading-screen" class="screen active">
            <div class="loading-background"></div>
            <div class="totoro-silhouette"></div>
            <div class="umbrella">â˜‚ï¸</div>
            <!-- Secret Totoro: Loading Screen -->
            <img src="image/totoro.png" class="secret-totoro-loading" style="position:absolute; left:10px; bottom:10px; width:60px; opacity:0.1; pointer-events:none; z-index:2;" alt="Secret Totoro">
            <div class="raindrops">
                <div class="raindrop"></div>
                <div class="raindrop"></div>
                <div class="raindrop"></div>
                <div class="raindrop"></div>
                <div class="raindrop"></div>
                <div class="raindrop"></div>
                <div class="raindrop"></div>
                <div class="raindrop"></div>
                <div class="raindrop"></div>
                <div class="raindrop"></div>
            </div>
            <div class="loading-content">
                <div class="totoro-loading">
                    <div class="totoro-body">
                        <div class="totoro-belly"></div>
                        <div class="totoro-eyes">
                            <div class="eye"></div>
                            <div class="eye"></div>
                        </div>
                        <div class="totoro-nose"></div>
                        <div class="totoro-whiskers">
                            <div class="whisker"></div>
                            <div class="whisker"></div>
                            <div class="whisker"></div>
                            <div class="whisker"></div>
                            <div class="whisker"></div>
                            <div class="whisker"></div>
                        </div>
                    </div>
                </div>
                <div class="loading-title">Loading...</div>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
                <div class="loading-text">Press any key to continue</div>
            </div>
            <div class="loading-sparkle" id="loading-sparkle">âœ¨âœ¨âœ¨</div>
        </div>

        <!-- Main Menu -->
        <div id="main-menu" class="screen">
            <div class="menu-content">
                <img src="image/totoro.png" alt="Totoro" class="totoro-main-img" />
                <h1 class="game-title">Hello Chloe</h1>
                <div class="subtitle">3 Month Anniversary Edition</div>
                
                <div class="menu-options">
                    <button class="menu-btn" onclick="startGame()">Start Journey</button>
                    <button class="menu-btn" onclick="showGallery()">Photo Memories</button>
                    <button class="menu-btn" onclick="showVideo()">Special Video</button>
                    <button class="menu-btn" onclick="showSnakeGame()">Snake Game</button>
                    <button class="menu-btn" id="final-message-btn" onclick="showFinalMessage()" disabled>Final Message ğŸ”’</button>
                </div>
                
                <div class="floating-elements">
                    <div class="floating-totoro">ğŸ¾</div>
                    <div class="floating-spirit">âœ¨</div>
                    <div class="floating-leaf">ğŸƒ</div>
                    <div class="floating-acorn">ğŸŒ°</div>
                    <div class="floating-umbrella">â˜‚ï¸</div>
                    <!-- Ghibli Additions -->
                    <div class="floating-soot">â—</div>
                    <div class="floating-catbus">ğŸšŒ</div>
                    <div class="floating-noface">ğŸ­</div>
                    <div class="floating-haku">ğŸ‰</div>
                </div>
                <!-- Chloe Sticker on the right -->
                <img src="image/chloe.png" alt="Chloe Sticker" class="chloe-sticker" />
            </div>
        </div>

        <!-- Game World -->
        <div id="game-world" class="screen">
            <!-- Secret Totoro: Game World -->
            <img src="image/totoro.png" class="secret-totoro-game" style="position:absolute; left:12%; bottom:60px; width:40px; opacity:0.13; pointer-events:none; z-index:3;" alt="Secret Totoro">
            <div class="game-ui">
                <div class="health-bar">
                    <div class="health-fill"></div>
                </div>
                <div class="location-indicator">Location: <span id="current-location">Main Area</span></div>
            </div>
            
            <div class="world-container">
                <div class="character" id="player">
                    <div class="character-sprite">ğŸ‘«</div>
                    <div class="character-shadow"></div>
                    <div class="character-glow"></div>
                </div>
                
                <!-- Map Locations -->
                <div class="map-locations">
                    <div class="location photo-gallery-location" data-location="gallery">
                        <div class="location-icon">ğŸ“¸</div>
                        <div class="location-label">Photo Gallery</div>
                        <div class="location-glow"></div>
                    </div>
                    <div class="location snake-location" data-location="snake">
                        <div class="location-icon">ğŸ</div>
                        <div class="location-label">Snake Game</div>
                        <div class="location-glow"></div>
                    </div>
                    <div class="location message-location" data-location="message" style="display:none;">
                        <div class="location-icon">ğŸ’Œ</div>
                        <div class="location-label">Love Message</div>
                        <div class="location-glow"></div>
                    </div>
                    <div class="location menu-location" data-location="menu">
                        <div class="location-icon">ğŸ </div>
                        <div class="location-label">Main Menu</div>
                        <div class="location-glow"></div>
                    </div>
                    <!-- Add a video location to the map -->
                    <div class="location video-location" data-location="video">
                        <div class="location-icon">ğŸ¬</div>
                        <div class="location-label">Video</div>
                        <div class="location-glow"></div>
                    </div>
                </div>
                
                <div class="world-elements">
                    <div class="tree large-tree">ğŸŒ³</div>
                    <div class="tree medium-tree">ğŸŒ²</div>
                    <div class="tree small-tree">ğŸŒ³</div>
                    <div class="flower sakura">ğŸŒ¸</div>
                    <div class="flower daisy">ğŸŒ¼</div>
                    <div class="flower rose">ğŸŒ¹</div>
                    <div class="cloud fluffy-cloud">â˜ï¸</div>
                    <div class="cloud rain-cloud">â˜ï¸</div>
                    <div class="butterfly blue-butterfly">ğŸ¦‹</div>
                    <div class="butterfly yellow-butterfly">ğŸ¦‹</div>
                    <div class="totoro-friend">ğŸ¾</div>
                    <div class="catbus">ğŸšŒ</div>
                    <div class="umbrella-world">â˜‚ï¸</div>
                </div>
                
                <div class="collectibles">
                    <div class="acorn-collectible" data-collected="false">ğŸŒ°</div>
                    <div class="acorn-collectible" data-collected="false">ğŸŒ°</div>
                    <div class="acorn-collectible" data-collected="false">ğŸŒ°</div>
                    <div class="spirit-collectible" data-collected="false">âœ¨</div>
                    <div class="spirit-collectible" data-collected="false">âœ¨</div>
                    <div class="leaf-collectible" data-collected="false">ğŸƒ</div>
                    <div class="leaf-collectible" data-collected="false">ğŸƒ</div>
                </div>
                
                <div class="ground"></div>
                <div class="grass-patches">
                    <div class="grass-patch"></div>
                    <div class="grass-patch"></div>
                    <div class="grass-patch"></div>
                    <div class="grass-patch"></div>
                    <div class="grass-patch"></div>
                </div>
                
                <!-- Game particles -->
                <div class="game-particles"></div>
            </div>
            
            <div class="game-controls">
                <button class="control-btn" onclick="moveLeft()">ğŸ“¸ Gallery</button>
                <button class="control-btn" onclick="moveRight()">ğŸ¬ Video</button>
                <button class="control-btn message-btn" onclick="moveUp()" disabled>ğŸ’Œ Message</button>
                <button class="control-btn" onclick="moveUp()">ğŸ Snake Game</button>
            </div>
            <div class="main-menu-btn-container">
                <button class="control-btn" onclick="showMainMenu()">ğŸ  Main Menu</button>
            </div>
        </div>

        <!-- Snake Game Overlay (on top of everything) -->
        <div id="snake-overlay" style="display:none;">
            <div class="snake-container">
                <h2 class="snake-title">ğŸ Snake Game</h2>
                <canvas id="snake-canvas" width="320" height="320"></canvas>
                <div class="snake-scoreboard">
                    <span>Score: <span id="snake-score">0</span></span>
                    <span>High Score: <span id="snake-highscore">0</span></span>
                </div>
                <div class="snake-instructions">Use arrow keys to move. Press R to restart after game over.<br>Get 20 points to unlock the message!</div>
                <div class="snake-btn-row">
                  <button class="back-btn" onclick="hideSnakeOverlay()">â† Back to Menu</button>
                  <button class="snake-start-btn" onclick="startSnakeGame()">Start Game</button>
                </div>
            </div>
        </div>

        <!-- Photo Gallery -->
        <div id="photo-gallery" class="screen">
            <!-- Secret Totoro: Photo Gallery -->
            <img src="image/totoro.png" class="secret-totoro-gallery" style="position:absolute; top:12px; right:18px; width:28px; opacity:0.09; pointer-events:none; z-index:12;" alt="Secret Totoro">
            <div class="gallery-header">
                <button class="back-btn" onclick="showMainMenu()">â† Back to Menu</button>
                <span class="gallery-label">Photo Gallery</span>
            </div>
            <div class="carousel-container">
                <div class="carousel-wrapper">
                    <div class="carousel-track" id="carousel-track">
                        <!-- Photos will be loaded here -->
                    </div>
                </div>
                <!-- Removed carousel-controls and carousel-indicators -->
            </div>
        </div>

        <!-- Special Message -->
        <div id="special-message" class="screen">
            <div class="message-container">
                <h2>My Special Message to You</h2>
                
                <div class="message-editor">
                    <textarea id="message-text" placeholder="Type your special anniversary message here...">Hello Cucumber, happy third anniversary. Currently I should be in China right now, enjoying the burning weather and that's pretty much it (I will come back 2 shades darker). I am writing this on July 11, 2025 at 1:04 am, I have work tomorrow but that is completely fine. Hope you passed your G. Wow looking back, if things donâ€™t go to plan it would not be very good to bring them up now. Anyways, I hope you liked the whole website thing. Thanks for being together with me for the past 3 months, through the fun and tiring times, through the first hug to the first I love you, through the sunsets and the fireworks, and most importantly for the time we spent together. I donâ€™t really know what the next few months or years will look like, but I do know that I want to keep making memories with you. Just donâ€™t kidnap me like you did today. Thank you for being patient with me and for making me laugh and smile every time I see you. Iâ€™m sorry for being very negative sometimes and sometimes pessimistic. Thanks for being with me and hope you enjoyed what I prepared for you!

I love you! Happy anniversary!
</textarea>
                    
                    <div class="message-controls">
                        <button class="save-btn" onclick="saveMessage()">Save Message</button>
                        <button class="print-btn" onclick="printMessage()">Print Message</button>
                    </div>
                </div>
                
                <div class="message-preview">
                    <h3>Message Preview:</h3>
                    <div id="message-preview-content" class="preview-content"></div>
                </div>
                
                <button class="back-btn" onclick="showMainMenu()">â† Back to Menu</button>
            </div>
        </div>

        <!-- Video Section -->
        <div id="video-section" class="screen">
            <div class="video-back-btn-container">
                <button class="back-btn video-back-btn" onclick="showMainMenu()">â† Back to Menu</button>
            </div>
            <div class="video-container">
                <div class="video-wrapper">
                    <video id="anniversary-video" controls autoplay muted>
                        <source src="video/video.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
                <div class="video-controls">
                    <button class="video-btn" onclick="playVideo()">â–¶ï¸ Play Video</button>
                    <button class="video-btn" onclick="pauseVideo()">â¸ï¸ Pause</button>
                    <button class="video-btn" onclick="restartVideo()">ğŸ”„ Restart</button>
                </div>
                <div class="video-message">
                 </div>
                <!-- Removed video-navigation back button -->
            </div>
        </div>

        <!-- Final Message (Unlocked after game completion) -->
        <div id="final-message" class="screen">
            <div class="final-message-container">
                <div class="unlock-animation">
                    <div class="unlock-sparkles">
                        <span>âœ¨</span>
                        <span>âœ¨</span>
                        <span>âœ¨</span>
                        <span>âœ¨</span>
                        <span>âœ¨</span>
                    </div>
                    <h1>ğŸ‰ Congratulations! ğŸ‰</h1>
                    <p class="unlock-text">You've unlocked the final message!</p>
                </div>
                
                <div class="final-message-content">
                    <h2>My Final Message to You</h2>
                    <div class="final-message-text">
                        <p>Hello Cucumber,</p>
                        
                        <p>Happy third anniversary. Currently I should be in China right now, enjoying the burning weather and that's pretty much it (I will come back 2 shades darker). I am writing this on July 11, 2025 at 1:04 am, I have work tomorrow but that is completely fine. Hope you passed your G. Wow looking back, if things don't go to plan it would not be very good to bring them up now.</p>
                        
                        <p>Anyways, I hope you liked the whole website thing. Thanks for being together with me for the past 3 months, through the fun and tiring times, through the first hug to the first I love you, through the sunsets and the fireworks, and most importantly for the time we spent together. I don't really know what the next few months or years will look like, but I do know that I want to keep making memories with you. Just don't kidnap me like you did today.</p>
                        
                        <p>Thank you for being patient with me and for making me laugh and smile every time I see you. I'm sorry for being very negative sometimes and sometimes pessimistic. Thanks for being with me and hope you enjoyed what I prepared for you!</p>
                        
                        <p>I love you! Happy anniversary!</p>
                    </div>
                    <!-- Move Back to Menu button to top right, remove print/share -->
                    <button class="back-btn final-back-btn" onclick="showMainMenu()" style="position:absolute; top: 20px; right: 20px;">â† Back to Menu</button>
                </div>
                
            </div>
        </div>
    </div>

    <!-- Hidden file input for photos -->
    <input type="file" id="photo-input" accept="image/*" style="display: none;" onchange="handlePhotoUpload(event)">

    <script src="script.js"></script>
</body>
</html> 